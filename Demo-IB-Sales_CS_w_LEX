{"Version":"2019-10-30","StartAction":"34917c77-912d-42aa-9caf-815786face7e","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"34917c77-912d-42aa-9caf-815786face7e":{"position":{"x":160.8,"y":60.8}},"15dd3c7b-02f2-4588-8aa4-e8247b989153":{"position":{"x":158.4,"y":240}},"3b18408f-bc57-40a6-a035-a8c6f4ea8eed":{"position":{"x":159.2,"y":423.2},"overrideConsoleVoice":false},"5bec956b-d5ef-473a-9200-2fb6e204b111":{"position":{"x":3295.2,"y":335.2},"parameters":{"QueueId":{"displayName":"Customer_Service"}},"queue":{"text":"Customer_Service"}},"bbb064bb-b6ce-4d7a-a82e-ecd86d127a83":{"position":{"x":3002.4,"y":319.2}},"Error Message":{"position":{"x":2883.2,"y":83.2},"isFriendlyName":true},"5b755f4d-b069-4146-ac4b-6919a228d21e":{"position":{"x":2532.8,"y":-38.4},"parameters":{"EventHooks":{"CustomerQueue":{"displayName":"Sample interruptible queue flow with callback"}}},"contactFlow":{"text":"Sample interruptible queue flow with callback","id":"arn:aws:connect:us-east-1:513693027989:instance/c67fa619-1718-4e33-ae07-d0566ddedbeb/contact-flow/dc21a914-15f7-4d3c-bdf9-8fd657cf2aa7"},"customerOrAgent":true},"29a76a6d-cc4b-4c5d-a1ee-19b96143626e":{"position":{"x":3560.8,"y":381.6}},"2a7fa643-6a9d-40a0-adb5-479a979b25bd":{"position":{"x":155.2,"y":608}},"81b74344-893d-41af-b405-0ccfc0c4b809":{"position":{"x":1958.4,"y":917.6}},"51e90069-97ce-4bc9-899a-f52f429c281d":{"position":{"x":2730.4,"y":268.8}},"f5ceb93e-3c2b-4710-858e-459f5e964ed3":{"position":{"x":2632.8,"y":513.6}},"334bc811-17e6-42c6-b986-5b79cf72a5db":{"position":{"x":2888,"y":511.2}},"ceb536b1-e877-4a7a-89b3-89e979e3a680":{"position":{"x":3235.2,"y":816.8}},"Customer Service":{"position":{"x":1469.6,"y":161.6},"isFriendlyName":true,"parameters":{"QueueId":{"displayName":"Customer_Service"}},"queue":{"text":"Customer_Service"}},"Sales":{"position":{"x":1466.4,"y":-39.2},"isFriendlyName":true,"parameters":{"QueueId":{"displayName":"Sales"}},"queue":{"text":"Sales"}},"Welcome Prompt":{"position":{"x":721.6,"y":60},"isFriendlyName":true},"e5c394bc-2d4a-4f7b-91fb-f0006473c31a":{"position":{"x":1227.2,"y":208}},"Retry_01":{"position":{"x":983.2,"y":206.4},"isFriendlyName":true},"Menu":{"position":{"x":1085.6,"y":-104.8},"isFriendlyName":true,"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"DemoMenu_Bot","useLexBotDropdown":true,"lexV2BotName":"Demo_Bot_Menu_CS_Sales"}}},"useLexBotDropdown":true,"lexV2BotName":"Demo_Bot_Menu_CS_Sales","lexV2BotAliasName":"DemoMenu_Bot","conditionMetadata":[{"id":"ff91219f-337a-479b-8e25-513ac4dae959","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Sales"},{"id":"5ba3d0d1-2b55-4d9e-b5a4-d39c5e14d93a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"CustomerService"}]},"Thank you good bye":{"position":{"x":3229.6,"y":559.2},"isFriendlyName":true},"badc56b4-ac2b-469c-ad92-5c8f0dc828b9":{"position":{"x":1660,"y":512.8}},"c9b71641-47bd-48fd-aff5-c262ddc9e6b1":{"position":{"x":604,"y":468.8}},"Retry_02":{"position":{"x":876.8,"y":700},"isFriendlyName":true},"0340916c-abca-44dc-837f-8a8d63daa408":{"position":{"x":1173.6,"y":720}},"5da2456c-b8e1-47ef-8cc2-718bbd14c532":{"position":{"x":879.2,"y":430.4},"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Callback_Bot","useLexBotDropdown":true,"lexV2BotName":"CallbackBot"}}},"useLexBotDropdown":true,"lexV2BotName":"CallbackBot","lexV2BotAliasName":"Callback_Bot","conditionMetadata":[{"id":"200c4abf-dbfe-4e0e-b03f-79af66f98837","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Callback"}]},"c49df6b5-80b0-4d27-9c4d-2cadb06ae349":{"position":{"x":3227.2,"y":72}},"e2aa8513-1189-42bf-b58f-f169fbe8ad84":{"position":{"x":1780,"y":28.8}},"e87c5074-0dd6-4a17-8434-cc64d4ed1fec":{"position":{"x":2191.2,"y":451.2}},"Retry_03":{"position":{"x":1976,"y":445.6},"isFriendlyName":true},"ca9d0780-11f5-42a5-875a-759b800a0713":{"position":{"x":2432.8,"y":180},"conditionMetadata":[],"countryCodePrefix":"+1"},"Unstaffed_Callback":{"position":{"x":2042.4,"y":157.6},"isFriendlyName":true,"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Callback_Bot","useLexBotDropdown":true,"lexV2BotName":"CallbackBot"}}},"useLexBotDropdown":true,"lexV2BotName":"CallbackBot","lexV2BotAliasName":"Callback_Bot","conditionMetadata":[{"id":"96ceb91d-c5ce-4fcb-9be9-675b662e71ed","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Callback"}]}},"Annotations":[],"name":"Demo-IB-Sales_CS_w_LEX","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"34917c77-912d-42aa-9caf-815786face7e","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"15dd3c7b-02f2-4588-8aa4-e8247b989153"}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":[]}},"Identifier":"15dd3c7b-02f2-4588-8aa4-e8247b989153","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"3b18408f-bc57-40a6-a035-a8c6f4ea8eed"}},{"Parameters":{"TextToSpeechVoice":"Joanna"},"Identifier":"3b18408f-bc57-40a6-a035-a8c6f4ea8eed","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"2a7fa643-6a9d-40a0-adb5-479a979b25bd"}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:513693027989:instance/c67fa619-1718-4e33-ae07-d0566ddedbeb/queue/b9389c94-21a3-4d0d-987a-2cdac974179b"},"Identifier":"5bec956b-d5ef-473a-9200-2fb6e204b111","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"c49df6b5-80b0-4d27-9c4d-2cadb06ae349","Errors":[{"NextAction":"Thank you good bye","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"You will be called back when the next agent is available."},"Identifier":"bbb064bb-b6ce-4d7a-a82e-ecd86d127a83","Type":"MessageParticipant","Transitions":{"NextAction":"5bec956b-d5ef-473a-9200-2fb6e204b111"}},{"Parameters":{"SSML":"<speak>I'm sorry we are having an issue processing this call, please try your call back again later. Thank you, good bye</speak>"},"Identifier":"Error Message","Type":"MessageParticipant","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"EventHooks":{"CustomerQueue":"arn:aws:connect:us-east-1:513693027989:instance/c67fa619-1718-4e33-ae07-d0566ddedbeb/contact-flow/dc21a914-15f7-4d3c-bdf9-8fd657cf2aa7"}},"Identifier":"5b755f4d-b069-4146-ac4b-6919a228d21e","Type":"UpdateContactEventHooks","Transitions":{"NextAction":"c49df6b5-80b0-4d27-9c4d-2cadb06ae349","Errors":[{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{},"Identifier":"2a7fa643-6a9d-40a0-adb5-479a979b25bd","Type":"CheckHoursOfOperation","Transitions":{"NextAction":"81b74344-893d-41af-b405-0ccfc0c4b809","Conditions":[{"NextAction":"Welcome Prompt","Condition":{"Operator":"Equals","Operands":["True"]}},{"NextAction":"c9b71641-47bd-48fd-aff5-c262ddc9e6b1","Condition":{"Operator":"Equals","Operands":["False"]}}],"Errors":[{"NextAction":"81b74344-893d-41af-b405-0ccfc0c4b809","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>We are currenty experiencing some technical difficulties, please try your call again later.</speak>"},"Identifier":"81b74344-893d-41af-b405-0ccfc0c4b809","Type":"MessageParticipant","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"CallbackNumber":"$.StoredCustomerInput"},"Identifier":"51e90069-97ce-4bc9-899a-f52f429c281d","Type":"UpdateContactCallbackNumber","Transitions":{"NextAction":"bbb064bb-b6ce-4d7a-a82e-ecd86d127a83","Errors":[{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"InvalidCallbackNumber"},{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"CallbackNumberNotDialable"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"f5ceb93e-3c2b-4710-858e-459f5e964ed3","Type":"Loop","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Conditions":[{"NextAction":"ca9d0780-11f5-42a5-875a-759b800a0713","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"The number entered is invalid. Please try again."},"Identifier":"334bc811-17e6-42c6-b986-5b79cf72a5db","Type":"MessageParticipant","Transitions":{"NextAction":"f5ceb93e-3c2b-4710-858e-459f5e964ed3"}},{"Parameters":{"Text":"You will be called back when the next agent is available."},"Identifier":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Type":"MessageParticipant","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e"}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:513693027989:instance/c67fa619-1718-4e33-ae07-d0566ddedbeb/queue/b9389c94-21a3-4d0d-987a-2cdac974179b"},"Identifier":"Customer Service","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"e2aa8513-1189-42bf-b58f-f169fbe8ad84","Errors":[{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:513693027989:instance/c67fa619-1718-4e33-ae07-d0566ddedbeb/queue/99ac26e2-0a33-41f5-b711-3fb91ab3e816"},"Identifier":"Sales","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"e2aa8513-1189-42bf-b58f-f169fbe8ad84","Errors":[{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>Thank you for calling Unlimited Services. Your call is greatly appreciated. Please listen to the following options..</speak>"},"Identifier":"Welcome Prompt","Type":"MessageParticipant","Transitions":{"NextAction":"Menu","Errors":[{"NextAction":"Menu","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","Type":"Loop","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Conditions":[{"NextAction":"Retry_01","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"<speak>I'm sorry I didn't get that. Let's try again.</speak>"},"Identifier":"Retry_01","Type":"MessageParticipant","Transitions":{"NextAction":"Menu","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>To Speak with a sales associate, please press or say 1. For questions on a current service request, or to create a new request, press or say 2.</speak>","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:513693027989:bot-alias/DUDHOEO80S/UO7JIGAQFE"}},"Identifier":"Menu","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","Conditions":[{"NextAction":"Sales","Condition":{"Operator":"Equals","Operands":["Sales"]}},{"NextAction":"Customer Service","Condition":{"Operator":"Equals","Operands":["CustomerService"]}}],"Errors":[{"NextAction":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","ErrorType":"NoMatchingCondition"},{"NextAction":"e5c394bc-2d4a-4f7b-91fb-f0006473c31a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>We thank you for your call, good bye.</speak>"},"Identifier":"Thank you good bye","Type":"MessageParticipant","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>We are sorry we missed your call, Good Bye</speak>"},"Identifier":"badc56b4-ac2b-469c-ad92-5c8f0dc828b9","Type":"MessageParticipant","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>Thank you for calling Unlimited Services. Your call is very important to us. Our office is currently closed. our normal business hours are Monday through Friday From 9 A.M. to 5 P.M. Local time.</speak>"},"Identifier":"c9b71641-47bd-48fd-aff5-c262ddc9e6b1","Type":"MessageParticipant","Transitions":{"NextAction":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","Errors":[{"NextAction":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>I'm sorry I didn't get that. Let's try again.</speak>"},"Identifier":"Retry_02","Type":"MessageParticipant","Transitions":{"NextAction":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"0340916c-abca-44dc-837f-8a8d63daa408","Type":"Loop","Transitions":{"NextAction":"badc56b4-ac2b-469c-ad92-5c8f0dc828b9","Conditions":[{"NextAction":"Retry_02","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"badc56b4-ac2b-469c-ad92-5c8f0dc828b9","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"<speak>If you would like for a team member to call you back once we are open please press or say 1.</speak>","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:513693027989:bot-alias/NZ0JFZAV2L/1MYGKXOE8K"}},"Identifier":"5da2456c-b8e1-47ef-8cc2-718bbd14c532","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"0340916c-abca-44dc-837f-8a8d63daa408","Conditions":[{"NextAction":"ca9d0780-11f5-42a5-875a-759b800a0713","Condition":{"Operator":"Equals","Operands":["Callback"]}}],"Errors":[{"NextAction":"0340916c-abca-44dc-837f-8a8d63daa408","ErrorType":"NoMatchingCondition"},{"NextAction":"0340916c-abca-44dc-837f-8a8d63daa408","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"c49df6b5-80b0-4d27-9c4d-2cadb06ae349","Type":"TransferContactToQueue","Transitions":{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","Errors":[{"NextAction":"Unstaffed_Callback","ErrorType":"QueueAtCapacity"},{"NextAction":"29a76a6d-cc4b-4c5d-a1ee-19b96143626e","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MetricType":"NumberOfAgentsStaffed"},"Identifier":"e2aa8513-1189-42bf-b58f-f169fbe8ad84","Type":"CheckMetricData","Transitions":{"NextAction":"Error Message","Conditions":[{"NextAction":"5b755f4d-b069-4146-ac4b-6919a228d21e","Condition":{"Operator":"NumberGreaterThan","Operands":["0"]}}],"Errors":[{"NextAction":"Unstaffed_Callback","ErrorType":"NoMatchingCondition"},{"NextAction":"Error Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"3"},"Identifier":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","Type":"Loop","Transitions":{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Conditions":[{"NextAction":"Retry_03","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"<speak>I'm sorry I didn't get that. Let's try again.</speak>"},"Identifier":"Retry_03","Type":"MessageParticipant","Transitions":{"NextAction":"Unstaffed_Callback","Errors":[{"NextAction":"ceb536b1-e877-4a7a-89b3-89e979e3a680","ErrorType":"NoMatchingError"}]}},{"Parameters":{"StoreInput":"True","InputTimeLimitSeconds":"5","Text":"Enter the number you would like to be called back at.","InputValidation":{"PhoneNumberValidation":{"NumberFormat":"Local","CountryCode":"US"}}},"Identifier":"ca9d0780-11f5-42a5-875a-759b800a0713","Type":"GetParticipantInput","Transitions":{"NextAction":"51e90069-97ce-4bc9-899a-f52f429c281d","Errors":[{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"NoMatchingError"},{"NextAction":"334bc811-17e6-42c6-b986-5b79cf72a5db","ErrorType":"InvalidPhoneNumber"}]}},{"Parameters":{"SSML":"<speak>All of our team members are currently assisting other callers, we apologize for any inconvenience. If you would like to leave a call back number, press or say one, and the next available team member will contact you. Or you can try your call again at a later time. </speak>","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:513693027989:bot-alias/NZ0JFZAV2L/1MYGKXOE8K"}},"Identifier":"Unstaffed_Callback","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","Conditions":[{"NextAction":"ca9d0780-11f5-42a5-875a-759b800a0713","Condition":{"Operator":"Equals","Operands":["Callback"]}}],"Errors":[{"NextAction":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","ErrorType":"NoMatchingCondition"},{"NextAction":"e87c5074-0dd6-4a17-8434-cc64d4ed1fec","ErrorType":"NoMatchingError"}]}}]}